---
import BaseLayout from '../layouts/Base.astro';
import PostPreview from "../components/blog/PostPreviewB.astro";
import ProjectPreview from "../components/ProjectPreview.astro";
import SocialMediaLinks from "../components/SocialMediaLinks.astro";
import { getAllPosts, getAllProjects, sortMDByDate, sortMDByPinned, sortProjectsByOrder } from "../utils";

const MAX_POSTS = 5;
const allPosts = await getAllPosts();
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
const allPostsByPinned = sortMDByPinned(allPostsByDate);

// Get all projects
const allProjects = await getAllProjects();
const sortedProjects = sortProjectsByOrder(allProjects);

---

<BaseLayout title="Cave">
	<section>
		<h1 class="title">Yo!! Welcome :> </h1>
		<p class="mb-4 sm:mb-8">
      Hi there! Welcome to my lil cave. Please grab a seat and enjoy a cup of coffee(or tea). I'm Yiyuan Li, a computer science student
      whos instrest with Rust and Graphics Programming. Recently im trying to do some project with Go to expand my skills. 
      
		</p>
		<p class="mb-4 sm:mb-8">
     I'll be sharing some of my recent projects and tech-related topics here,
    Of course, there will also be content about films or my life in general.
		</p>

		<p class="mb-4 sm:mb-8">
		I'm currently looking for a job as a backend developer, you can find my CV by <a href="/YiyuanLi_CV.pdf" class="cody-link">clicking here</a>
	    </p>
		<div>
			<span>Hit me up:</span>
			<SocialMediaLinks/>
		</div>
	</section>

	<section class="mt-12 sm:mt-16">
		<div class="flex justify-between items-center mb-6">
			<h2 class="title">Projects Index</h2>
			<a href="/project" class="text-accent hover:text-accent-2 transition-colors text-sm">#index</a>
		</div>
		
		<p class="mb-4">
			Projects Index is a index that contains a list of all my personal projects. Major categories are highlighted below.
		</p>

		<div class="flex items-start justify-between flex-col md:flex-row gap-12">
			<div class="w-full md:w-1/2">
				<h3 class="title text-lg mb-3">Backend Development</h3>
				<p class="mb-4">I enjoy working on backend systems and infrastructure.</p>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/rego" class="cody-link">sequel</a>
						<p class="text-sm mt-1">A from-scratch SQLite parser and query engine written in Rust</p>
					</li>
					
				</ul>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/rego" class="cody-link">rego</a>
						<p class="text-sm mt-1">a lightweight Redis server implementation written in Go</p>
					</li>
					
				</ul>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/hrust" class="cody-link">hrust</a>
						<p class="text-sm mt-1">A small HTTP server that is written in Rust</p>
					</li>
					
				</ul>
				
				<h3 class="title text-lg mt-8 mb-3">Language Implementation</h3>
				<p class="mb-4">Projects exploring programming language implementation and concepts.</p>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/ruskey" class="cody-link">ruskey</a>
						<p class="text-sm mt-1">A rust interpreter implementation of custom language Monkey</p>
					</li>
					<li>
						<a href="/project/ylib" class="cody-link">ylib</a>
						<p class="text-sm mt-1">C Standard library rewrite</p>
					</li>
				</ul>
			</div>
			
			<div class="w-full md:w-1/2">
				<h3 class="title text-lg mb-3">Graphics & Visualization</h3>
				<p class="mb-4">Projects focused on graphics programming and visualization techniques.</p>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/rayrust" class="cody-link">rayrust</a>
						<p class="text-sm mt-1">Just a ray tracer in Rust</p>
					</li>
				</ul>
				
				<h3 class="title text-lg mt-8 mb-3">Tools & Utilities</h3>
				<p class="mb-4">Helpful tools and utilities I've built to improve workflows.</p>
				<ul class="list-disc ml-6 space-y-2">
					<li>
						<a href="/project/pew" class="cody-link">pew</a>
						<p class="text-sm mt-1">A lightweight CLI tool for dumping your codebase into a single file, perfect to work with LLMs</p>
					</li>
					<li>
						<a href="/project/shell" class="cody-link">shell</a>
						<p class="text-sm mt-1">does this count???</p>
						<p class="text-sm mt-1">single-binary shell written in Rust. If you want a fancy terminal shell or 500 features you’re in the wrong place this just works</p>
					</li>
				</ul>
			</div>
		</div>
	</section>

	<section class="mt-12 sm:mt-16">
		<div class="flex justify-between items-center mb-4">
			<h2 class="title">Recent Posts</h2>
			<a href="/blog" class="text-sm text-accent hover:text-accent-2 transition-colors">View All →</a>
		</div>
		<ul class="space-y-4 sm:space-y-2">
			{allPostsByPinned.map(p => <PostPreview post={p}/>)}
		</ul>
	</section>
</BaseLayout>
